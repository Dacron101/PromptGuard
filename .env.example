########################################################################
# PromptGate — Environment Configuration
# Copy this file to .env and fill in your real values.
# Never commit .env to version control.
########################################################################


# ── Gemini (AI threat explanations) ────────────────────────────────────────
# Used by: GeminiExplainer inside DeepScanVerifier (--deep-scan flag)
#
# When VirusTotal or the Firecracker sandbox detects a threat, ClaudeGuard
# calls gemini-2.0-flash-lite to generate a plain-English explanation of
# why Claude Code was interrupted, e.g.:
#   "The installation of 'evil-pkg' via pip was blocked because VirusTotal
#    identified it as a backdoor (7/72 engines). Claude Code has been
#    interrupted to protect your system."
#
# How to get it:
#   1. Go to https://aistudio.google.com/app/apikey
#   2. Sign in with your Google account
#   3. Click "Create API key" → select or create a project
#   4. Copy the key below
#
# Cost: gemini-2.0-flash-lite costs ~$0.0001 per explanation call.
#       If the key is missing, ClaudeGuard falls back to a built-in
#       template — no functionality is lost.
#
GEMINI_API_KEY=your-google-ai-studio-key-here


# ── VirusTotal ──────────────────────────────────────────────────────────────
# Used by: DeepScanVerifier (--deep-scan flag) and scripts/check_virustotal.py
#
# How to get it:
#   1. Create a free account at https://www.virustotal.com
#   2. Go to your profile → API key
#   Free tier: 500 lookups/day, 4 requests/minute
#   Premium needed for: bulk uploads, private scanning, higher rate limits
#
VT_API_KEY=your-virustotal-api-key-here


# ── Firecracker MicroVM ─────────────────────────────────────────────────────
# Used by: DeepScanVerifier when --deep-scan is passed to promptgate.py
#
# FC_KERNEL_PATH — path to a compiled Linux kernel image (vmlinux ELF).
#   Download a prebuilt one:
#     curl -Lo vmlinux https://s3.amazonaws.com/spec.ccfc.min/firecracker-ci/v1.10/x86_64/vmlinux-5.10.225
#   Or build your own: https://github.com/firecracker-microvm/firecracker/blob/main/docs/rootfs-and-kernel-setup.md
#
FC_KERNEL_PATH=./vmlinux

# FC_ROOTFS_PATH — path to a root filesystem image (ext4).
#   Must contain: Python 3, pip/npm/cargo/go, and check_virustotal.py
#   deployed at /usr/local/bin/check_virustotal.py.
#   Build guide: https://github.com/firecracker-microvm/firecracker/blob/main/docs/rootfs-and-kernel-setup.md
#   Minimum rootfs setup (run inside the image):
#     apt-get install -y python3 python3-pip nodejs npm cargo golang
#     pip3 install requests
#     cp scripts/check_virustotal.py /usr/local/bin/check_virustotal.py
#
FC_ROOTFS_PATH=./rootfs.ext4

# FC_VM_IP — IP address assigned to the VM guest interface.
#   Must match the ip= value in the kernel boot args AND be in the same
#   /24 as FC_HOST_IP. Default subnet: 172.16.0.0/24.
#
FC_VM_IP=172.16.0.2

# FC_HOST_IP — IP address of the host-side TAP device (the gateway for the VM).
#   Set up the TAP device once on the host (requires root):
#     sudo ip tuntap add tap0 mode tap
#     sudo ip addr add 172.16.0.1/24 dev tap0
#     sudo ip link set tap0 up
#   Optional — enable outbound internet from VM (for package downloads):
#     sudo iptables -t nat -A POSTROUTING -o eth0 -j MASQUERADE
#     sudo sysctl -w net.ipv4.ip_forward=1
#
FC_HOST_IP=172.16.0.1

# FC_TAP_DEVICE — name of the TAP network device created above.
#
FC_TAP_DEVICE=tap0

# FC_SSH_KEY_PATH — path to the SSH private key used to log into root@VM.
#   Generate a dedicated key (do not reuse your personal keys):
#     ssh-keygen -t ed25519 -f ~/.ssh/firecracker_id_rsa -N ""
#   Then bake the public key into the rootfs:
#     cat ~/.ssh/firecracker_id_rsa.pub >> /path/to/rootfs/root/.ssh/authorized_keys
#
FC_SSH_KEY_PATH=~/.ssh/firecracker_id_rsa
